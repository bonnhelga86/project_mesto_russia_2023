(()=>{"use strict";var e=document.querySelector(".popup-profile").querySelector(".form"),t=document.querySelector(".profile__edit"),r=document.querySelector(".popup-avatar").querySelector(".form"),n=document.querySelector(".profile__image"),o=document.querySelector(".popup-card").querySelector(".form"),i=document.querySelector(".profile__button"),u={inputSelector:".form__input",submitButtonSelector:".popup__button",errorMessageSelector:".form__text-error_type_",inputErrorClass:"form__input_error",textErrorClass:"form__text-error_visible"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers,this._authorization=t.headers.authorization}var t,r;return t=e,(r=[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authorization}}).then(this._getResponseData)}},{key:"saveCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._getResponseData)}},{key:"likeCard",value:function(e,t){var r=t.classList.contains("elements__like_type_active")?"DELETE":"PUT";return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:r,headers:{authorization:this._authorization}}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._authorization}}).then((function(e){return e.ok?Promise.resolve():Promise.reject("Ошибка: ".concat(res.status))}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authorization}}).then(this._getResponseData)}},{key:"saveUserInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._getResponseData)}},{key:"editUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._getResponseData)}}])&&c(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===s(t)?t:String(t)}var m=function(){function e(t,r,n,o){var i=this,u=o.handleCardClick,a=o.handleLikeClick,c=o.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_isLike",(function(e){return e.some((function(e){return e._id===i._myId}))})),p(this,"_setLikesCounter",(function(e){i._cardElement.querySelector(".elements__like-count").textContent=e})),p(this,"setLikeStatus",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i._likes,t=i._cardElement.querySelector(".elements__like");i._isLike(e)?t.classList.add("elements__like_type_active"):t.classList.remove("elements__like_type_active"),i._setLikesCounter(e.length)})),this._cardId=t._id,this._name=t.name,this._link=t.link,this._likes=t.likes,this._cardOwner=t.owner._id,this._myId=r,this._templateSelector=n,this._openPopupWithImage=u,this._likeCard=a,this._openPopupForDelete=c,this._popupImage=document.querySelector(".popup-image"),this._popupImagePhoto=document.querySelector(".popup-image__photo"),this._popupImageCaption=document.querySelector(".popup-image__caption")}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".elements__item").cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._cardElement.querySelector(".elements__like").addEventListener("click",(function(t){e._likeCard(t.target,e._cardId,e._isLike)})),this._cardElement.querySelector(".elements__trash").addEventListener("click",(function(t){e._openPopupForDelete(t.target.closest(".elements__item"),e._cardId)})),this._cardImage.addEventListener("click",(function(){e._openPopupWithImage(e._name,e._link)}))}},{key:"_setDeleteIcon",value:function(){this._cardOwner===this._myId&&this._cardElement.querySelector(".elements__trash").classList.add("elements__trash_show")}},{key:"generateCard",value:function(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".elements__photo"),this._setEventListeners(),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".elements__title").textContent=this._name,this._setDeleteIcon(),this.setLikeStatus(),this._cardElement}}])&&f(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function v(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}var _=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"removeValidationErrors",(function(){n._inputList.forEach((function(e){n._hideError(e)}))})),v(this,"enableSubmitButton",(function(){n._submitButton.disabled=!1})),v(this,"disableSubmitButton",(function(){n._submitButton.disabled=!0})),v(this,"enableValidation",(function(){n._setEventListener()})),this._config=t,this._form=r,this._inputList=this._form.querySelectorAll(this._config.inputSelector),this._submitButton=this._form.querySelector(this._config.submitButtonSelector)}var t,r;return t=e,(r=[{key:"_hideError",value:function(e){var t=this._form.querySelector("".concat(this._config.errorMessageSelector).concat(e.name));t.textContent="",t.classList.remove(this._config.textErrorClass),e.classList.remove(this._config.inputErrorClass)}},{key:"_showError",value:function(e){var t=this._form.querySelector("".concat(this._config.errorMessageSelector).concat(e.name));t.textContent=e.validationMessage,t.classList.add(this._config.textErrorClass),e.classList.add(this._config.inputErrorClass)}},{key:"_isInputValid",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_hasInvalidInput",value:function(){return Array.from(this._inputList).some((function(e){return!e.validity.valid}))}},{key:"_toggleSubmitButton",value:function(){this._submitButton.disabled=this._hasInvalidInput()}},{key:"_setEventListener",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(t){e._isInputValid(t.target),e._toggleSubmitButton()}))}))}}])&&b(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===g(o)?o:String(o)),n)}var o}var w=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,r;return t=e,r=[{key:"addItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._itemElement;this._container.prepend(e)}},{key:"renderItems",value:function(e,t){var r=this;e.forEach((function(e){r._itemElement=r._renderer(e,t),r.addItem()}))}}],r&&S(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===k(t)?t:String(t)}var E=function(){function e(t){var r,n,o,i=this,u=t.nameSelector,a=t.aboutSelector,c=t.avatarSelector,l=t.popupSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=function(e){Object.keys(e).forEach((function(t){i._form[t]&&(i._form[t].value=e[t])}))},(n=j(n="setInputValues"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._name=document.querySelector(u),this._about=document.querySelector(a),this._avatar=document.querySelector(c),this._form=document.querySelector(l).querySelector(".form")}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{"profile-name":this._name.textContent,"profile-profession":this._about.textContent}}},{key:"setUserAvatar",value:function(e){var t=e.avatar;this._avatar.src=t}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about;this._name.textContent=t,this._about.textContent=r,this._avatar.alt=t}}])&&O(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function I(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===P(t)?t:String(t)}var q=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),I(this,"_handleEscClose",(function(e){"Escape"===e.key&&r.close()})),I(this,"_handleCloseClick",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&r.close()})),this._popup=document.querySelector(t)}var t,r;return t=e,(r=[{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this._handleCloseClick),document.addEventListener("keyup",this._handleEscClose)}},{key:"open",value:function(){this.setEventListeners(),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose),this._popup.removeEventListener("click",this._handleCloseClick)}}])&&C(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},D.apply(this,arguments)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(n);if(o){var r=B(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImagePhoto=t._popup.querySelector(".popup-image__photo"),t._popupImageCaption=t._popup.querySelector(".popup-image__caption"),t}return t=u,(r=[{key:"_setImageParameters",value:function(){this._popupImagePhoto.src=this._link,this._popupImagePhoto.alt=this._name,this._popupImageCaption.textContent=this._name}},{key:"open",value:function(e,t){D(B(u.prototype),"open",this).call(this),this._name=e,this._link=t,this._setImageParameters()}}])&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(q);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$(n.key),n)}}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},F.apply(this,arguments)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function W(e,t,r){return(t=$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===A(t)?t:String(t)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(n);if(o){var r=H(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}(this,e)});function u(e,t){var r,n=t.callbackSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),W(J(r=i.call(this,e)),"_getInputValues",(function(){return Array.from(r._form.querySelectorAll(".form__input")).reduce((function(e,t){return z(z({},e),{},W({},t.name,t.value))}),{})})),W(J(r),"_hanldeSubmitClick",(function(e){return r._callbackSubmit(e,r._getInputValues(),r._popup)})),r._callbackSubmit=n,r._form=r._popup.querySelector(".form"),r}return t=u,(r=[{key:"setEventListeners",value:function(){F(H(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._hanldeSubmitClick)}},{key:"close",value:function(){F(H(u.prototype),"close",this).call(this),this._form.removeEventListener("submit",this._hanldeSubmitClick),this._form.reset()}}])&&M(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(q);function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},X.apply(this,arguments)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e){var t=function(e,t){if("object"!==K(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===K(t)?t:String(t)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(n);if(o){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}(this,e)});function u(e,t){var r,n,o,a,c=t.handleButtonClick;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=Z(r=i.call(this,e)),a=function(){r._handleButtonClick(r._elementForDelete,r._cardId)},(o=te(o="_deleteCard"))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,r._handleButtonClick=c,r._button=r._popup.querySelector(".button"),r}return t=u,(r=[{key:"setEventListeners",value:function(){X(ee(u.prototype),"setEventListeners",this).call(this),this._button.addEventListener("click",this._deleteCard)}},{key:"open",value:function(e,t){X(ee(u.prototype),"open",this).call(this),this._cardId=t,this._elementForDelete=e}},{key:"close",value:function(){X(ee(u.prototype),"close",this).call(this),this._button.removeEventListener("click",this._deleteAction)}}])&&Q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(q);function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe=new l({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-65",headers:{authorization:"76bd6af4-1eb8-427e-97cd-2bc6cdc45941","Content-Type":"application/json"}}),ie=new _(u,e);ie.enableValidation();var ue=new _(u,o);ue.enableValidation();var ae=new _(u,r);ae.enableValidation();var ce=new re(".popup-delete",{handleButtonClick:function(e,t){oe.deleteCard(t).then((function(){e.remove(),ce.close()})).catch((function(e){console.error(e)}))}}),le=new x(".popup-image"),se=function(e,t){var r=new m(e,t,"#elements__template",{handleCardClick:function(e,t){le.open(e,t)},handleLikeClick:function(e,t){oe.likeCard(t,e).then((function(e){r.setLikeStatus(e.likes)})).catch((function(e){console.error(e)}))},handleDeleteClick:function(e,t){ce.open(e,t)}});return r.generateCard()},fe=new w({renderer:function(e,t){return se(e,t)}},".elements__list-item"),pe=new E({nameSelector:".profile__name",aboutSelector:".profile__profession",avatarSelector:".profile__image",popupSelector:".popup-profile"}),ye=function(e,t){e.textContent=t},me=new G(".popup-profile",{callbackSubmit:function(e,t,r){var n=t["profile-name"],o=t["profile-profession"];e.preventDefault();var i=r.querySelector(".popup__button");ye(i,"Сохранение..."),oe.saveUserInfo(n,o).then((function(e){pe.setUserInfo(e),me.close()})).catch((function(e){console.error(e)})).finally((function(){ye(i,"Сохранить")}))}});Promise.all([oe.getUserInfo(),oe.getInitialCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];pe.setUserInfo(o),pe.setUserAvatar(o),fe.renderItems(i,o._id)})).catch((function(e){console.error(e)}));var he=new G(".popup-avatar",{callbackSubmit:function(e,t,r){var n=t["avatar-link"];e.preventDefault();var o=r.querySelector(".popup__button");ye(o,"Сохранение..."),oe.editUserAvatar(n).then((function(e){pe.setUserAvatar(e),he.close()})).catch((function(e){console.error(e)})).finally((function(){ye(o,"Сохранить")}))}}),be=new G(".popup-card",{callbackSubmit:function(e,t,r){var n=t["card-name"],o=t["card-link"];e.preventDefault();var i=r.querySelector(".popup__button");ye(i,"Сохранение..."),oe.saveCard(n,o).then((function(e){var t=se(e,e.owner._id);fe.addItem(t),be.close()})).catch((function(e){console.error(e)})).finally((function(){ye(i,"Создать")}))}});t.addEventListener("click",(function(){pe.setInputValues(pe.getUserInfo()),ie.removeValidationErrors(),ie.enableSubmitButton(),me.open()})),n.addEventListener("click",(function(){ae.removeValidationErrors(),ae.disableSubmitButton(),he.open()})),i.addEventListener("click",(function(){ue.removeValidationErrors(),ue.disableSubmitButton(),be.open()}))})();